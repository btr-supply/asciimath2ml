(()=>{var q=Object.create;var T=Object.defineProperty;var N=Object.getOwnPropertyDescriptor;var U=Object.getOwnPropertyNames;var z=Object.getPrototypeOf,j=Object.prototype.hasOwnProperty;var I=(r,u)=>()=>(u||r((u={exports:{}}).exports,u),u.exports);var W=(r,u,e,i)=>{if(u&&typeof u=="object"||typeof u=="function")for(let D of U(u))!j.call(r,D)&&D!==e&&T(r,D,{get:()=>u[D],enumerable:!(i=N(u,D))||i.enumerable});return r};var Q=(r,u,e)=>(e=r!=null?q(z(r)):{},W(u||!r||!r.__esModule?T(e,"default",{value:r,enumerable:!0}):e,r));var M=I(d=>{"use strict";Object.defineProperty(d,"__esModule",{value:!0});d.StyledElement=d.CustomElement=void 0;var A=class extends HTMLElement{constructor(){super(),this.root=this.attachShadow({mode:"open"}),this.connected=!1}connectedCallback(){this.connected||(this.connect(),this.connected=!0)}};d.CustomElement=A;var $=class extends A{constructor(u){super();let e=document.createElement("link");e.setAttribute("rel","stylesheet");let i=document.currentScript.src,D=i.substring(0,i.lastIndexOf("/"));e.setAttribute("href",`${D}/${u}.css`),this.root.appendChild(e),this.body=document.createElement("div"),this.root.appendChild(this.body)}};d.StyledElement=$});var H=Q(M());var B=class{constructor(u,e){this.charTables=[];this.input=u,this.symbols=e,this.pos=0}eof(){return this.pos>=this.input.length}skipWhitespace(){for(;this.pos<this.input.length&&/\s/.test(this.input[this.pos]);)++this.pos;return this.pos<this.input.length?this.pos:-1}peekSymbol(){let u=this.skipWhitespace();if(u<0)return[Y(),u];let e=this.input[u];if(e=='"'){for(;++u<this.input.length&&this.input[u]!='"';);return[J(this.input.slice(this.pos+1,u)),u+1]}if(/\d/.test(e)){for(;u<this.input.length&&/[\d\.]/.test(this.input[u]);)++u;return[V(this.input.slice(this.pos,u)),u]}let i=this.symbols[e];if(i)for(let D=0;D<i.length;++D){let o=i[D],a=o.input.length;if(this.input.slice(u,u+a)==o.input)return[o,u+a]}return[F(e),u+1]}nextSymbol(){let[u,e]=this.peekSymbol();return e>=0&&(this.pos=e),u}pushCharTable(u){this.charTables.push(u)}popCharTable(){this.charTables.pop()}charTable(){return this.charTables[this.charTables.length-1]}},Z=["\u{1D49C}","\u212C","\u{1D49E}","\u{1D49F}","\u2130","\u2131","\u{1D4A2}","\u210B","\u2110","\u{1D4A5}","\u{1D4A6}","\u2112","\u2133","\u{1D4A9}","\u{1D4AA}","\u{1D4AB}","\u{1D4AC}","\u211B","\u{1D4AE}","\u{1D4AF}","\u{1D4B0}","\u{1D4B1}","\u{1D4B2}","\u{1D4B3}","\u{1D4B4}","\u{1D4B5}","\u{1D4B6}","\u{1D4B7}","\u{1D4B8}","\u{1D4B9}","\u212F","\u{1D4BB}","\u210A","\u{1D4BD}","\u{1D4BE}","\u{1D4BF}","\u{1D4C0}","\u{1D4C1}","\u{1D4C2}","\u{1D4C3}","\u2134","\u{1D4C5}","\u{1D4C6}","\u{1D4C7}","\u{1D4C8}","\u{1D4C9}","\u{1D4CA}","\u{1D4CB}","\u{1D4CC}","\u{1D4CD}","\u{1D4CE}","\u{1D4CF}"],G=["\u{1D504}","\u{1D505}","\u212D","\u{1D507}","\u{1D508}","\u{1D509}","\u{1D50A}","\u210C","\u2111","\u{1D50D}","\u{1D50E}","\u{1D50F}","\u{1D510}","\u{1D511}","\u{1D512}","\u{1D513}","\u{1D514}","\u211C","\u{1D516}","\u{1D517}","\u{1D518}","\u{1D519}","\u{1D51A}","\u{1D51B}","\u{1D51C}","\u2128","\u{1D51E}","\u{1D51F}","\u{1D520}","\u{1D521}","\u{1D522}","\u{1D523}","\u{1D524}","\u{1D525}","\u{1D526}","\u{1D527}","\u{1D528}","\u{1D529}","\u{1D52A}","\u{1D52B}","\u{1D52C}","\u{1D52D}","\u{1D52E}","\u{1D52F}","\u{1D530}","\u{1D531}","\u{1D532}","\u{1D533}","\u{1D534}","\u{1D535}","\u{1D536}","\u{1D537}"],X=["\u{1D538}","\u{1D539}","\u2102","\u{1D53B}","\u{1D53C}","\u{1D53D}","\u{1D53E}","\u210D","\u{1D540}","\u{1D541}","\u{1D542}","\u{1D543}","\u{1D544}","\u2115","\u{1D546}","\u2119","\u211A","\u211D","\u{1D54A}","\u{1D54B}","\u{1D54C}","\u{1D54D}","\u{1D54E}","\u{1D54F}","\u{1D550}","\u2124","\u{1D552}","\u{1D553}","\u{1D554}","\u{1D555}","\u{1D556}","\u{1D557}","\u{1D558}","\u{1D559}","\u{1D55A}","\u{1D55B}","\u{1D55C}","\u{1D55D}","\u{1D55E}","\u{1D55F}","\u{1D560}","\u{1D561}","\u{1D562}","\u{1D563}","\u{1D564}","\u{1D565}","\u{1D566}","\u{1D567}","\u{1D568}","\u{1D569}","\u{1D56A}","\u{1D56B}"];function K(r,u){if(!u)return r;let e="";for(let i=0;i<r.length;++i){let D=r.charCodeAt(i);e+=D>=65&&D<91?u[D-65]:D>=97&&D<123?u[D-71]:r[i]}return e}function J(r){return{kind:0,input:r,parser:u=>`<mtext>${K(r,u.charTable())}</mtext>`}}function V(r){return{kind:0,input:r,parser:()=>`<mn>${r}</mn>`}}function F(r){return{kind:0,input:"",parser:()=>`<merror><mtext>${r}</mtext></merror>`}}function Y(){return{kind:8,input:"",parser:()=>""}}function n(r,u=r){return{kind:0,input:r,parser:e=>`<mi>${K(u,e.charTable())}</mi>`}}function t(r,u){return{kind:0,input:r,parser:()=>`<mo>${u}</mo>`}}function c(r,u=r){return{kind:0,input:r,parser:()=>`<mrow><mspace width="1ex"/><mtext>${u}</mtext><mspace width="1ex"/></mrow>`}}function l(r,u=r){return{kind:1,input:r,parser:()=>`<mo>${u}</mo>`}}function h(r,u){return{kind:2,input:r,parser:u?()=>`<mo>${u}</mo>`:()=>""}}function b(r,u){return{kind:3,input:r,parser:u?()=>`<mo>${u}</mo>`:()=>""}}function uu(r){return u=>{let e=m(u);return`<mrow>${r}${e}</mrow>`}}function s(r,u=r){return{kind:0,input:r,parser:uu(`<mo>${u}</mo>`)}}function ru(r){return u=>{let e=m(u);return`<${r}>${e}</${r}>`}}function P(r,u){return{kind:0,input:r,parser:ru(u)}}function tu(r,u){return e=>{let i=m(e);return`<${r}>${i}${u}</${r}>`}}function p(r,u,e){return{kind:1,input:r,parser:tu(u,`<mo>${e}</mo>`)}}function eu(r,u){return e=>{let i=m(e);return`<mrow>${r}${i}${u}</mrow>`}}function y(r,u,e){return{kind:0,input:r,parser:eu(`<mo>${u}</mo>`,`<mo>${e}</mo>`)}}function nu(r,u){return e=>{let i=m(e);return`<${r} ${u}">${i}</${r}>`}}function k(r,u,e){return{kind:0,input:r,parser:nu(u,e)}}function iu(r){return u=>{u.pushCharTable(r);let e=m(u);return u.popCharTable(),e}}function v(r,u){return{kind:0,input:r,parser:iu(u)}}function Du(r){return u=>{let e=m(u),i=m(u);return`<${r}>${e}${i}</${r}>`}}function g(r,u){return{kind:0,input:r,parser:Du(u)}}function su(r,u){return e=>{let i=e.nextSymbol().input,D=m(e);return`<${r} ${u}="${i}">${D}</${r}>`}}function x(r,u,e){return{kind:0,input:r,parser:su(u,e)}}function O(r){let u=r.nextSymbol();if(u.kind==2){let e=u.parser(r),[i]=r.peekSymbol(),D=i.kind==3?"":w(r);i=r.nextSymbol();let o=(i.kind==3?i:F("Missing closing paren")).parser(r);return[`<mrow>${e}${D}${o}</mrow>`,u]}return[u.parser(r),u]}function m(r){return O(r)[0]}function L(r){let[u,e]=O(r),i,D,[o,a]=r.peekSymbol();return o.input=="_"&&(r.pos=a,i=m(r),[o,a]=r.peekSymbol()),o.input=="^"&&(r.pos=a,D=m(r)),e.kind==1?i&&D?`<munderover>${u}${i}${D}</munderover>`:i?`<munder>${u}${i}</munder>`:D?`<mover>${u}${D}</mover>`:u:i&&D?`<msubsup>${u}${i}${D}</msubsup>`:i?`<msub>${u}${i}</msub>`:D?`<msup>${u}${D}</msup>`:u}var R=[8,3,6,7,5];function w(r){let u="";for(;;){let e=L(r),[i,D]=r.peekSymbol();if(R.includes(i.kind))return u+e;if(i.input=="/"){r.pos=D;let o=L(r);if(e=`$<mfrac>${e}${o}</mfrac>`,[i]=r.peekSymbol(),R.includes(i.kind))return u+e}u+=e}}function ou(r){return u=>{let e="";for(;;){let[i,D]=u.peekSymbol();if(i.kind==8||i.kind==5){u.pos=D;let a=i.parser(u);return r||a?`<mrow>${r}<mtable>${e}</mtable>${a}</mrow>`:`<mtable>${e}</mtable>`}let o=au(u);e=`${e}<mtr>${o}</mtr>`}}}function au(r){let u="";for(;;){let[e,i]=r.peekSymbol();if(e.kind==8||e.kind==7)return r.pos=i,u;if(e.kind==5)return u;let D=w(r);u=`${u}<mtd>${D}</mtd>`}}function C(r,u){return{kind:4,input:r,parser:ou(u?`<mo>${u}</mo>`:"")}}function S(r,u){return{kind:5,input:r,parser:()=>u?`<mo>${u}</mo>`:""}}function lu(r){return{kind:6,input:r,parser:()=>""}}function mu(r){return{kind:7,input:r,parser:()=>""}}var pu={a:[s("arcsin"),s("arccos"),s("arctan"),n("alpha","\u03B1"),t("aleph","\u2135"),y("abs","|","|"),c("and"),n("a")],A:[s("Arcsin"),s("Arccos"),s("Arctan"),y("Abs","|","|"),t("AA","\u2200"),n("A")],b:[n("beta","\u03B2"),p("bar","mover","\xAF"),v("bbb",X),k("bb","mstyle",'style="font-weight: bold"'),n("b")],B:[n("B")],c:[k("cancel","menclose",'notation="updiagonalstrike"'),x("color","mstyle","mathcolor"),x("class","mrow","class"),t("cdots","\u22EF"),y("ceil","\u2308","\u2309"),s("cosh"),s("csch"),s("cos"),s("cot"),s("csc"),n("chi","\u03C7"),v("cc",Z),n("c")],C:[s("Cosh"),s("Cos"),s("Cot"),s("Csc"),t("CC","\u2102"),n("C")],d:[t("diamonds","\u22C4"),n("delta","\u03B4"),t("ddots","\u22F1"),p("ddot","mover",".."),t("darr","\u2193"),t("del","\u2202"),s("det"),p("dot","mover","."),c("dim"),n("d")],D:[t("Delta","\u0394"),n("D")],e:[n("epsilon","\u03B5"),n("eta","\u03B7"),s("exp"),n("e")],E:[t("EE","\u2203"),n("E")],f:[y("floor","\u230A","\u230B"),t("frown","\u2322"),g("frac","mfrac"),v("fr",G),n("f")],F:[n("F")],g:[n("gamma","\u03B3"),t("grad","\u2207"),s("gcd"),c("glb"),n("g")],G:[t("Gamma","\u0393"),n("G")],h:[t("harr","\u2194"),t("hArr","\u21D4"),p("hat","mover","^"),n("h")],H:[n("H")],i:[n("iota","\u03B9"),t("int","\u222B"),t("in","\u2208"),c("if"),x("id","mrow","id"),n("i")],I:[n("I")],j:[n("j")],J:[n("J")],k:[n("kappa","\u03BA"),n("k")],K:[n("K")],l:[n("lambda","\u03BB"),t("larr","\u2190"),t("lArr","\u21D0"),l("lim","lim"),s("log"),s("lcm"),c("lub"),s("ln"),n("l")],L:[t("Lambda","\u039B"),l("Lim","Lim"),s("Log"),s("Ln"),n("L")],m:[l("min"),l("max"),c("mod"),n("mu","\u03BC"),n("m")],M:[n("M")],n:[y("norm","\u2225","\u2225"),l("nnn","\u22C2"),t("not","\xAC"),t("nn","\u2229"),n("nu","\u03BD"),n("n")],N:[t("NN","\u2115"),n("N")],o:[p("overarc","mover","\u23DC"),g("overset","mover"),p("obrace","mover","\u23DE"),n("omega","\u03C9"),t("oint","\u222E"),c("or"),t("o+","\u2295"),t("ox","\u2295"),t("o.","\u2299"),t("oo","\u221E"),n("o")],O:[t("Omega","\u03A9"),t("O/","\u2205"),n("O")],p:[l("prod","\u220F"),n("prop","\u221D"),n("phi","\u03D5"),n("psi","\u03C8"),n("pi","\u03C0"),n("p")],P:[t("Phi","\u03A6"),n("Psi","\u03A8"),t("Pi","\u03A0"),n("P")],q:[t("qquad","\xA0\xA0\xA0\xA0"),t("quad","\xA0\xA0"),n("q")],Q:[t("QQ","\u211A"),n("Q")],r:[t("rarr","\u2192"),t("rArr","\u21D2"),g("root","mroot"),n("rho","\u03C1"),n("r")],R:[t("RR","\u211D"),n("R")],s:[g("stackrel","mover"),t("setminus","\\"),t("square","\u25A1"),n("sigma","\u03C3"),l("sube","\u2286"),l("supe","\u2287"),P("sqrt","msqrt"),s("sinh"),s("sech"),l("sum","\u2211"),l("sub","\u2282"),l("sup","\u2283"),s("sin"),s("sec"),k("sf","mstyle",'style="font-family: sans-serif"'),n("s")],S:[t("Sigma","\u03A3"),s("Sinh"),s("Sin"),s("Sec"),n("S")],t:[n("theta","\u03B8"),p("tilde","mover","~"),P("text","mtext"),s("tanh"),s("tan"),n("tau","\u03C4"),k("tt","mstyle",'style="font-family: monospace"'),n("t")],T:[t("Theta","\u0398"),s("Tanh"),s("Tan"),t("TT","\u22A4"),n("T")],u:[g("underset","munder"),n("upsilon","\u03C5"),p("ubrace","munder","\u23DF"),t("uarr","\u2191"),l("uuu","\u22C3"),t("uu","\u222A"),p("ul","munder","\u0332"),n("u")],U:[n("U")],v:[n("varepsilon","\u025B"),n("vartheta","\u03D1"),n("varphi","\u03C6"),t("vdots","\u22EE"),p("vec","mover","\u2192"),l("vvv","\u22C1"),t("vv","\u2228"),n("v")],V:[n("V")],w:[n("w")],W:[n("W")],x:[n("xi","\u03BE"),t("xx","\xD7"),n("x")],X:[n("Xi","\u039E"),n("X")],y:[n("y")],Y:[n("Y")],z:[n("zeta","\u03B6"),n("z")],Z:[t("ZZ","\u2124"),n("Z")],"-":[t("__|","\u230B"),t("-<=","\u2AAF"),t("->>","\u21A0"),t("->","\u2192"),t("-<","\u227A"),t("-:","\xF7"),t("-=","\u2261"),t("-+","\u2213"),t("-","\u2212")],"*":[t("***","\u22C6"),t("**","\u2217"),t("*","\u22C5")],"+":[t("+-","\xB1"),t("+","+")],"/":[t("/_\\","\u25B3"),t("/_","\u2220"),t("//","/"),t("/","")],"\\":[t("\\\\","\\"),t("\\","\xA0")],"|":[t("|><|","\u22C8"),t("|><","\u22C9"),t("|->","\u21A6"),t("|--","\u22A2"),t("|==","\u22A8"),t("|__","\u230A"),C("||:","|"),C("|::"),t("|~","\u2308"),h("|:","|"),S("|)",")"),S("|]","]"),S("|}","}"),t("|","|")],"<":[t("<=>","\u21D4"),t("<=","\u2264"),t("<<","\u226A"),t("<","<")],">":[t(">->>","\u2916"),t(">->","\u21A3"),t("><|","\u22CA"),t(">-=","\u2AB0"),t(">=","\u2265"),t(">-","\u227B"),t(">>","\u226B"),t(">",">")],"=":[t("=>","\u21D2"),t("=","=")],"@":[t("@","\u2218")],"^":[l("^^^","\u22C0"),t("^^","\u2227"),t("^","")],"~":[t("~~","\u2248"),t("~=","\u2245"),t("~|","\u2309"),t("~","\u223C")],"!":[t("!in","\u2209"),t("!=","\u2260"),t("!","!")],":":[S(":||","|"),S("::|"),t(":=",":="),b(":)","\u232A"),b(":|","|"),b(":}","}"),t(":.","\u2234"),t(":'","\u2235"),t(":",":")],";":[mu(";;"),lu(";")],".":[t("...","...")],",":[t(",",",")],_:[t("_|_","\u22A5"),t("_","")],"'":[t("'","\u2032")],"(":[C("(|","("),h("(:","\u2329"),h("(","(")],")":[b(")",")")],"[":[C("[|","["),h("[","[")],"]":[b("]","]")],"{":[C("{|","{"),h("{:","{"),h("{")],"}":[b("}")]};function _(r,u=!1){let e=new B(r,pu);return`<math display="${u?"inline":"block"}"><mstyle displaystyle="true">${w(e)}</mstyle></math>`}var E=class extends H.StyledElement{constructor(){super("asciimath-editor");this.label=`
            <span class="label">Preview</span>
    `;this.content=`
        <textarea name="input" id="input" rows="5" spellcheck="false"
            placeholder="Enter AsciiMath Equation">
        </textarea>
        <div id="preview">
            ${this.label}
        </div>
    `}get input(){return this.shadowRoot.getElementById("input")}get preview(){return this.shadowRoot.getElementById("preview")}update(){let e=this.input.value,i=this.preview;e?(e=_(e),i.innerHTML=e,this.format(i,0),e=`
                ${e}
                <details>
                    <summary>Show MathML</summary>
                    <xmp>${i.innerHTML.trim()}</xmp>
                </details>
            `):e=this.label,i.innerHTML=e}connect(){this.body.innerHTML=this.content,this.body.className="body",this.body.append(this.input,this.preview);let e=this.getAttribute("value");e&&(this.input.value=e,this.update()),this.input.onchange=()=>this.update()}format(e,i){let D=new Array(i+++1).join("  "),o=new Array(i-1).join("  "),a;for(var f=0;f<e.children.length;f++)a=document.createTextNode(`
`+D),e.insertBefore(a,e.children[f]),this.format(e.children[f],i),e.lastElementChild==e.children[f]&&(a=document.createTextNode(`
`+o),e.appendChild(a));return e}};customElements.define("asciimath-editor",E);})();
